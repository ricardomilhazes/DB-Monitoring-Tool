DROP TABLE "DBMONITORING"."DATAFILE" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."USER" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."CONTENT" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."DATAFILE_STATUS" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."CPU" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."PRIVILEGE" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."USER_PRIVILEGE" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."HIST_RESOURCE" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."DATABASE" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."TABLESPACE" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."TABLESPACE_STATUS" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."ONLINE_STATUS" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."QUOTA" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."USER_STATUS" CASCADE CONSTRAINTS;
DROP TABLE "DBMONITORING"."RESOURCE" CASCADE CONSTRAINTS;

   CREATE TABLE "DBMONITORING"."DATABASE" 
   ("DB_ID" NUMBER  NOT NULL, 
	"NAME" VARCHAR2(200 BYTE)  NOT NULL, 
    CONSTRAINT DB_ID_PK PRIMARY KEY (DB_ID)
   )  ;

       CREATE TABLE "DBMONITORING"."PRIVILEGE" 
   ("PRIVILEGE_ID" NUMBER  NOT NULL, 
	"NAME" VARCHAR2(45 BYTE)  NOT NULL, 
    CONSTRAINT PRIVILEGE_ID_PK PRIMARY KEY (PRIVILEGE_ID)
   )  ;

        CREATE TABLE "DBMONITORING"."CONTENT" 
   ("CONTENT_ID" NUMBER  NOT NULL, 
	"TYPE" VARCHAR2(45 BYTE)  NOT NULL, 
    CONSTRAINT CONTENT_ID_PK PRIMARY KEY (CONTENT_ID)
   )  ;
   
CREATE TABLE "DBMONITORING"."ONLINE_STATUS" 
   (	"ONLINE_STATUS_ID" NUMBER NOT NULL, 
	"STATUS" VARCHAR2(7 BYTE) NOT NULL,
    CONSTRAINT ONLINE_STATUS_PK PRIMARY KEY ("ONLINE_STATUS_ID")
);
   
            CREATE TABLE "DBMONITORING"."DATAFILE_STATUS" 
   ("DATAFILE_STATUS_ID" NUMBER  NOT NULL, 
	"STATUS" VARCHAR2(45 BYTE)  NOT NULL, 
    CONSTRAINT DATAFILE_STATUS_ID_PK PRIMARY KEY (DATAFILE_STATUS_ID)
   )  ;
   
      CREATE TABLE "DBMONITORING"."USER_STATUS" 
   ("USER_ID" NUMBER  NOT NULL, 
	"STATUS" VARCHAR2(45 BYTE)  NOT NULL, 
    CONSTRAINT USER_ID_PK PRIMARY KEY (USER_ID)
   )  ;  
  
   
   CREATE TABLE "DBMONITORING"."TABLESPACE_STATUS" 
   (	"TABLESPACE_STATUS_ID" NUMBER NOT NULL, 
	"STATUS" VARCHAR2(45 BYTE) NOT NULL, 
    CONSTRAINT TABLESPACE_STATUS_PK PRIMARY KEY (TABLESPACE_STATUS_ID)
   );
   
   CREATE TABLE "DBMONITORING"."USER" 
   ("USER_ID" NUMBER NOT NULL, 
	"USERNAME" VARCHAR2(200 BYTE) NOT NULL, 
	"ACCOUNT_STATUS" NUMBER NOT NULL, 
	"EXPIRATION_DATE" DATE NOT NULL, 
	"DEFAULT_TABLESPACE" NUMBER NOT NULL, 
	"TEMP_TABLESPACE" NUMBER NOT NULL, 
    "CREATION_DATE" DATE NOT NULL, 
    CONSTRAINT USER_PK PRIMARY KEY (USER_ID),
    CONSTRAINT FK_ACCOUNTSTATUS FOREIGN KEY (ACCOUNT_STATUS)
        REFERENCES "DBMONITORING"."USER_STATUS"(USER_ID)
   );
   
      CREATE TABLE "DBMONITORING"."RESOURCE" 
   ("RESOURCE_ID" NUMBER NOT NULL, 
	"NAME" VARCHAR2(200 BYTE) NOT NULL, 
    CONSTRAINT RESOURCE_ID_PK PRIMARY KEY (RESOURCE_ID)
   )  ;
   
   CREATE TABLE "DBMONITORING"."HIST_RESOURCE" 
   ("SNAP_ID" NUMBER NOT NULL, 
	"DB_ID"NUMBER NOT NULL, 
	"RESOURCE_ID" NUMBER NOT NULL, 
	"CURRENT_UTILIZATION" NUMBER NOT NULL, 
	"MAX_UTILIZATION" NUMBER NOT NULL, 
	"INITIAL_ALLOCATION" VARCHAR2(10 BYTE) NOT NULL, 
    "LIMIT_VALUE" VARCHAR2(10 BYTE) NOT NULL, 
    CONSTRAINT SNAP_ID_PK PRIMARY KEY (SNAP_ID),
    CONSTRAINT DB_ID_FK FOREIGN KEY (DB_ID)
    REFERENCES "DBMONITORING"."DATABASE"(DB_ID),
	CONSTRAINT RESOURCE_ID_FK FOREIGN KEY (RESOURCE_ID)
    REFERENCES "DBMONITORING"."RESOURCE"(RESOURCE_ID)
   ) ;
   
   
   
      CREATE TABLE "DBMONITORING"."USER_PRIVILEGE" 
   ("USER_ID" NUMBER  NOT NULL, 
	"PRIVILEGE_ID" NUMBER  NOT NULL, 
    CONSTRAINT USER_PRIVILEGE_ID_PK PRIMARY KEY (USER_ID,PRIVILEGE_ID),
    CONSTRAINT USER_PRIVILEGE_USER_FK FOREIGN KEY (USER_ID)
    REFERENCES "DBMONITORING"."USER"(USER_ID),
     CONSTRAINT USER_PRIVILEGE_ID_FK FOREIGN KEY (PRIVILEGE_ID)
    REFERENCES "DBMONITORING"."PRIVILEGE"(PRIVILEGE_ID)
   )  ;
   

         CREATE TABLE "DBMONITORING"."CPU" 
   ("CPU_INSTANCE_ID" NUMBER  NOT NULL, 
	"DB_ID" NUMBER  NOT NULL, 
    "TIMESTAMP" TIMESTAMP NOT NULL,
    "CPU_COUNT" NUMBER NOT NULL,
    "CPU_CORE_COUNT" NUMBER NOT NULL,
    "CPU_SOCKET_COUNT" NUMBER NOT NULL,
    CONSTRAINT CPU_ID_PK PRIMARY KEY (CPU_INSTANCE_ID),
    CONSTRAINT CPU_DB_ID_FK FOREIGN KEY (DB_ID)
    REFERENCES "DBMONITORING"."DATABASE"(DB_ID)
   )  ;
    
   
   CREATE TABLE "DBMONITORING"."TABLESPACE" 
("ID" NUMBER NOT NULL,	
"NAME" VARCHAR2(200 BYTE) NOT NULL, 
"STATUS" NUMBER NOT NULL,
"TOTAL_SIZE" NUMBER NOT NULL, 
"CONTENT" NUMBER NOT NULL,
"USED_PERCENTAGE" NUMBER NOT NULL, 
"DIRECTORY" VARCHAR2(200 BYTE) NOT NULL,
"MAX_SIZE" NUMBER NOT NULL, 
"DB_ID" NUMBER NOT NULL,
CONSTRAINT TABLESPACE_PK PRIMARY KEY (ID),
CONSTRAINT TABLESPACE_STATUS_FK FOREIGN KEY (STATUS)
REFERENCES "DBMONITORING"."TABLESPACE_STATUS"(TABLESPACE_STATUS_ID),
CONSTRAINT TABLESPACE_CONTENT_FK FOREIGN KEY (CONTENT)
REFERENCES "DBMONITORING"."CONTENT"(CONTENT_ID),
CONSTRAINT TABLESPACE_DB_FK FOREIGN KEY (DB_ID)
REFERENCES "DBMONITORING"."DATABASE"(DB_ID)
);
 
    CREATE TABLE "DBMONITORING"."QUOTA" 
   ("TABLESPACE_ID" NUMBER NOT NULL, 
	"USER_ID" NUMBER NOT NULL, 
	"CURRENT" NUMBER NOT NULL, 
	"MAX_SIZE" NUMBER NOT NULL, 
    CONSTRAINT TABLESPACE_ID_PK PRIMARY KEY (TABLESPACE_ID,USER_ID),
    CONSTRAINT TABLESPACE_ID_FK FOREIGN KEY (TABLESPACE_ID)
        REFERENCES "DBMONITORING"."TABLESPACE"(ID),
	CONSTRAINT USER_ID_FK FOREIGN KEY (USER_ID)
        REFERENCES "DBMONITORING"."USER"(USER_ID)
   ) ;
 
CREATE TABLE "DBMONITORING"."DATAFILE" 
   ("DATAFILE_ID" NUMBER NOT NULL,
   "NAME" VARCHAR2(200 BYTE) NOT NULL, 
	"TABLESPACE" NUMBER NOT NULL, 
	"CURRENT_SIZE" NUMBER NOT NULL,
    "STATUS" NUMBER NOT NULL,
	"AVAILABLE_SIZE" NUMBER NOT NULL, 
	"MAX_SIZE" NUMBER NOT NULL, 
	"AUTOEXTENSIBLE" NUMBER(3) NOT NULL,
    "ONLINE_STATUS" NUMBER NOT NULL,
    CONSTRAINT DATAFILE_PK PRIMARY KEY (DATAFILE_ID),
    CONSTRAINT FK_TABLESPACE FOREIGN KEY ("TABLESPACE")
        REFERENCES "DBMONITORING"."TABLESPACE"(ID),
    CONSTRAINT FK_STATUS FOREIGN KEY ("STATUS")
        REFERENCES "DBMONITORING"."DATAFILE_STATUS"(DATAFILE_STATUS_ID),
    CONSTRAINT FK_ONLINESTATUS FOREIGN KEY ("ONLINE_STATUS")
        REFERENCES "DBMONITORING"."ONLINE_STATUS"(ONLINE_STATUS_ID)    
   );        
   
